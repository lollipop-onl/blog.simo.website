<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="日付操作はmoment.jsが最強なんですが、今日がいったい今年の何日目か調べるためだけに使うのはためらわれるので自力で実装してみました"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@simocheeworks"/><meta name="twitter:domain" content="Hello New World"/><meta name="twitter:creator" content="@simocheeworks"/><meta name="twitter:image:src" content="http://simo.website/post/js-get-day-of-year/eyecatch.png"/><meta property="og:locale" content="ja_JP"/><meta property="og:type" content="article"/><meta property="og:title" content="JavaScriptで今年の経過日数を取得する | Hello New World"/><meta property="og:description" content="日付操作はmoment.jsが最強なんですが、今日がいったい今年の何日目か調べるためだけに使うのはためらわれるので自力で実装してみました"/><meta property="og:url" content="http://simo.websitepost/post/js-get-day-of-year/"/><meta property="og:site_name" content="Hello New World"/><meta property="og:image" content="http://simo.website/post/js-get-day-of-year/eyecatch.png"/><title>JavaScriptで今年の経過日数を取得する | Hello New World</title><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:100,400,700|Source+Code+Pro"><link rel="stylesheet" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"><link rel="stylesheet" href="/stylesheets/common.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89550293-2', 'auto');
ga('send', 'pageview');</script></head><body><header class="page-header"><header class="navbar theme-accent__border-color"><div class="navbar-container"><div class="left"><div class="bland"><a href="/">Hello New World</a></div></div><div class="right"><button id="navbarTrigger" class="theme-accent__background-color nav-trigger"></button><ul class="navbar-nav"><li><a href="/" class="theme-accent__hover__background-color">Home</a></li><li><a href="/categories/フロントエンド/" class="theme-accent__hover__background-color">フロントエンド</a></li><li class="social"><a href="https://twitter.com/simocheeworks" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-twitter"></span></a></li><li class="social"><a href="https://www.facebook.com/simocheeworks" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-facebook"></span></a></li><li class="social"><a href="/atom.xml" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-rss"></span></a></li></ul></div></div></header></header><main class="container"><article class="entry entry-post"><header class="post-header"><div class="date theme-accent__before__background-color">2017.01.01</div><h2 class="post-title">JavaScriptで今年の経過日数を取得する</h2><ul class="post-info"><li><a href="/categories/フロントエンド/" class="post-category theme-accent__hover__color">フロントエンド</a></li><li><a href="/tags/JavaScript/" class="post-tag theme-accent__hover__color">JavaScript</a></li><li><a href="/tags/Tips/" class="post-tag theme-accent__hover__color">Tips</a></li><li><a href="/tags/日付操作/" class="post-tag theme-accent__hover__color">日付操作</a></li></ul></header><main class="entry-post-content"><div class="header"><div class="summary">日付操作はmoment.jsが最強なんですが、今日がいったい今年の何日目か調べるためだけに使うのはためらわれるので自力で実装してみました</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#はじめに"><span class="toc-number">1.</span> <span class="toc-text">はじめに</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#デモ"><span class="toc-number">2.</span> <span class="toc-text">デモ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ソースコード"><span class="toc-number">3.</span> <span class="toc-text">ソースコード</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#簡単に解説"><span class="toc-number">3.1.</span> <span class="toc-text">簡単に解説</span></a></li></ol></li></ol></div><div class="content"><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>このブログを作る過程で、<em>今日が今年の何日目か</em>を取得しないといけなくなりました。</p>
<p>今日（元旦）とかなら調べるまでもありませんが、JavaScriptだとそうもいきません。</p>
<p>基本的に日付の操作はmoment.jsを使いたいですが、これだけのために導入するのはオーバースペックです。</p>
<p>ということで、今回はそれっぽいのを作る過程をご紹介します。</p>
<h2 id="デモ"><a href="#デモ" class="headerlink" title="デモ"></a>デモ</h2><iframe scrolling="no" width="100%" height="300" src="http://jsfiddle.net/0ngd74m2/embedded/result,html,js/light" frameborder="0" allowfullscreen></iframe>
<h2 id="ソースコード"><a href="#ソースコード" class="headerlink" title="ソースコード"></a>ソースコード</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getDayOfYear = <span class="function">(<span class="params">opts_date, opts_month, opts_year</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// 今現在</span></div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>;</div><div class="line">    <span class="comment">// 引数がなければ今年の西暦を設定</span></div><div class="line">    <span class="keyword">const</span> year = opts_year || now.getFullYear();</div><div class="line">    <span class="keyword">const</span> month = opts_month || now.getMonth() + <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> date = opts_date || now.getDate();</div><div class="line">    <span class="keyword">const</span> begin = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`<span class="subst">$&#123;year&#125;</span>-01-01 00:00:00`</span>);</div><div class="line">    <span class="keyword">const</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;date&#125;</span> 00:00:00`</span>);</div><div class="line">    <span class="comment">// 現在時刻とのミリ秒の差分</span></div><div class="line">    <span class="keyword">const</span> diff = end - begin;</div><div class="line">    <span class="comment">// ミリ秒を日数に変換</span></div><div class="line">    <span class="keyword">const</span> days = <span class="built_in">Math</span>.floor(diff / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)) + <span class="number">1</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> days;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="簡単に解説"><a href="#簡単に解説" class="headerlink" title="簡単に解説"></a>簡単に解説</h3><p>この関数は、年月日を指定すると、その日がその年の何日目かを計算します。</p>
<p>していることは簡単で、今年の1月1日0時0分0秒から指定日の0時0分0秒がどれだけ離れているかを<code>end - begin</code>でミリ秒で計算します。<br>あとは、計算結果を日に直すために１日のミリ秒（<code>24 * 60 * 60 * 1000</code>）で割ってあげればいいだけです。</p>
<p>引数は大きな部分を省略できるように、日・月・年の順番になっているところに注意してください。<br>すべての引数を省略したら、今日が今年の何日目かを調べることができます。</p>
<p>せっかくデモを作ったのに引数全省略とは・・・(^_^;)</p>
</div><div class="footer"><div class="post-details"><div class="details"><ul class="category"><li><a href="/categories/フロントエンド/" class="post-category theme-accent__hover__color">フロントエンド</a></li></ul><ul class="tag"><li><a href="/tags/JavaScript/" class="post-tag theme-accent__hover__color">JavaScript</a></li><li><a href="/tags/Tips/" class="post-tag theme-accent__hover__color">Tips</a></li><li><a href="/tags/日付操作/" class="post-tag theme-accent__hover__color">日付操作</a></li></ul><div class="date"><p class="posted">2017.01.01 9:00:00</p></div></div></div><div class="post-comment"><div id="disqus_thread"></div><script>/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//hello-new-world.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></main></article></main><footer class="global-footer"><div id="jumper" class="jumper theme-accent__hover__color"><span class="ion-android-arrow-up"></span></div><div class="container"><div class="launcher"><h5 class="theme-accent__color">Recent Posts</h5><div class="recent-posts"><div class="recent-post"><div style="background-image: url(/post/hexo-my-tag-plugin/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.05</div><h6>HexoのMarkdownを拡張する</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/Webその他/" class="theme-accent__hover__color">Webその他</a></li></ul><a href="/post/hexo-my-tag-plugin/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div><div class="recent-post"><div style="background-image: url(/post/lets-start-gimp-01/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.03</div><h6>〔GIMP入門#1〕無料のグラフィックソフト「GIMP」を使って画像編集入門！</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/GIMP/" class="theme-accent__hover__color">GIMP</a></li></ul><a href="/post/lets-start-gimp-01/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div><div class="recent-post"><div style="background-image: url(/post/js-get-day-of-year/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.01</div><h6>JavaScriptで今年の経過日数を取得する</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/フロントエンド/" class="theme-accent__hover__color">フロントエンド</a></li></ul><a href="/post/js-get-day-of-year/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div></div></div><ul class="launchers col-3"><li><h5 class="theme-accent__color">About the Author</h5><div class="profile"><img src="/images/common/avator-200.png" class="avator"/><div class="content"><div class="name theme-accent__before__border-color">simochee</div><p>西の方の高専で情報系の高専生（ＪＫ）をしています。もともとプログラミングがしたくて高専へ入ったのですが、学科名詐欺に遭い回路とマイコンの勉強をしています(^_^;)　それでもプログラミングがしたかったので自力でウェブの勉強を始めました。自分の中にブームが来るとそれにまつわる記事しか書きません。</p></div></div></li><li><h5 class="theme-accent__color">Categories</h5><ul class="dist-list"><li class="dist-list-item"><a class="dist-list-link" href="/categories/GIMP/">GIMP</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/Webその他/">Webその他</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/フロントエンド/">フロントエンド</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/未分類/">未分類</a><span class="dist-list-count">1</span></li></ul></li><li><h5 class="theme-accent__color">Archives</h5><ul class="dist-list"><li class="dist-list-item"><a class="dist-list-link" href="/archives/2017/01/">2017年1月</a><span class="dist-list-count">4</span></li></ul></li></ul><ul class="launchers col-2"><li><h5 class="theme-accent__color">SIMOCHEE//WORKS</h5><div class="simochee-works"><p>comming soon</p></div></li><li><h5 class="theme-accent__color">Tag Cloud</h5><div class="tagcloud"><a href="/tags/GIMP/" style="font-size: 10px;">GIMP</a> <a href="/tags/Hello-World/" style="font-size: 10px;">Hello World</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Tag-Plugins/" style="font-size: 10px;">Tag Plugins</a> <a href="/tags/Tips/" style="font-size: 10px;">Tips</a> <a href="/tags/グラフィック/" style="font-size: 10px;">グラフィック</a> <a href="/tags/日付操作/" style="font-size: 10px;">日付操作</a> <a href="/tags/日記/" style="font-size: 10px;">日記</a> <a href="/tags/連載/" style="font-size: 10px;">連載</a> <a href="/tags/連載：GIMP入門/" style="font-size: 10px;">連載：GIMP入門</a></div></li></ul></div><div class="footer-info theme-accent__border-color"><p class="copyright">Copyright &copy; 2016, <a href="http://simo.website" target="_blank" class="theme-accent__color">simo.website</a> All Rights Reserved</p></div></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script><script src="/scripts/script.js"></script></body></html>