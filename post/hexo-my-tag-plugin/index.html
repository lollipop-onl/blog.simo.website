<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="HexoのTag Pluginsにリンク付き画像がなかったのでつくってみました"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@simocheeworks"/><meta name="twitter:domain" content="Hello New World"/><meta name="twitter:creator" content="@simocheeworks"/><meta name="twitter:image:src" content="http://simo.website/post/hexo-my-tag-plugin/eyecatch.png"/><meta property="og:locale" content="ja_JP"/><meta property="og:type" content="article"/><meta property="og:title" content="HexoのMarkdownを拡張する | Hello New World"/><meta property="og:description" content="HexoのTag Pluginsにリンク付き画像がなかったのでつくってみました"/><meta property="og:url" content="http://simo.websitepost/post/hexo-my-tag-plugin/"/><meta property="og:site_name" content="Hello New World"/><meta property="og:image" content="http://simo.website/post/hexo-my-tag-plugin/eyecatch.png"/><title>HexoのMarkdownを拡張する | Hello New World</title><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:100,400,700|Source+Code+Pro"><link rel="stylesheet" href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"><link rel="stylesheet" href="/stylesheets/common.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89550293-2', 'auto');
ga('send', 'pageview');</script></head><body><header class="page-header"><header class="navbar theme-accent__border-color"><div class="navbar-container"><div class="left"><div class="bland"><a href="/">Hello New World</a></div></div><div class="right"><button id="navbarTrigger" class="theme-accent__background-color nav-trigger"></button><ul class="navbar-nav"><li><a href="/" class="theme-accent__hover__background-color">Home</a></li><li><a href="/categories/フロントエンド/" class="theme-accent__hover__background-color">フロントエンド</a></li><li class="social"><a href="https://twitter.com/simocheeworks" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-twitter"></span></a></li><li class="social"><a href="https://www.facebook.com/simocheeworks" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-facebook"></span></a></li><li class="social"><a href="/atom.xml" target="_blank" class="theme-accent__hover__background-color"><span class="ion-social-rss"></span></a></li></ul></div></div></header></header><main class="container"><article class="entry entry-post"><header class="post-header"><div class="date theme-accent__before__background-color">2017.01.05</div><h2 class="post-title">HexoのMarkdownを拡張する</h2><ul class="post-info"><li><a href="/categories/Webその他/" class="post-category theme-accent__hover__color">Webその他</a></li><li><a href="/tags/Hexo/" class="post-tag theme-accent__hover__color">Hexo</a></li><li><a href="/tags/Tag-Plugins/" class="post-tag theme-accent__hover__color">Tag Plugins</a></li><li><a href="/tags/Markdown/" class="post-tag theme-accent__hover__color">Markdown</a></li></ul></header><main class="entry-post-content"><div class="header"><div class="summary">HexoのTag Pluginsにリンク付き画像がなかったのでつくってみました</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Markdown"><span class="toc-number">1.</span> <span class="toc-text">Markdown</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#タグの使い方"><span class="toc-number">1.1.</span> <span class="toc-text">タグの使い方</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#タグを自作する"><span class="toc-number">2.</span> <span class="toc-text">タグを自作する</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#作るもの"><span class="toc-number">2.1.</span> <span class="toc-text">作るもの</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#スクリプトを置くところ"><span class="toc-number">2.2.</span> <span class="toc-text">スクリプトを置くところ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#構文"><span class="toc-number">2.3.</span> <span class="toc-text">構文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#コーディング"><span class="toc-number">2.4.</span> <span class="toc-text">コーディング</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使ってみる"><span class="toc-number">2.5.</span> <span class="toc-text">使ってみる</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#おわりに"><span class="toc-number">3.</span> <span class="toc-text">おわりに</span></a></li></ol></div><div class="content"><h1 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h1><p>Markdownって文書が簡潔に書けて便利ですよね。</p>
<p>Hexoには、このMarkdownを拡張する<em>タグ</em>というものがあります。</p>
<p>標準でもいくつか用意されていますが、今回はありそうでなかったリンク付き画像のタグを作ってみます。</p>
<p class="page-link"><a href="https://hexo.io/docs/tag-plugins.html" target="_blank"><span class="title">Tag Plugins</span><span class="author">Hexo</span></a></p>
<h2 id="タグの使い方"><a href="#タグの使い方" class="headerlink" title="タグの使い方"></a>タグの使い方</h2><p>自作する前に、用意されているタグを使ってみましょう。</p>
<p>では、Markdownだと面倒な新しいタブで開くリンクを実装できるタグを利用してみましょう</p>
<p>記事のMarkdownファイルに次のコードを書いてみてください。</p>
<figure class="highlight ada"><figcaption><span>link.md</span><a href="https://hexo.io/docs/tag-plugins.html#Link" target="_blank" rel="external">Reference</a></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% link http://simo.website <span class="literal">true</span> Hello <span class="keyword">New</span> World %&#125;</div></pre></td></tr></table></figure>
<p>すると、生成されたファイルには次のように書き出されます。</p>
<figure class="highlight xml"><figcaption><span>書き出し</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://simo.website"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Hello New World<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>また、ソースコードを掲載したければ、</p>
<figure class="highlight django"><figcaption><span>codeblock.md</span><a href="https://hexo.io/docs/tag-plugins.html#Code-Block" target="_blank" rel="external">Reference</a></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">codeblock</span> 書き出し %&#125;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://simo.website"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Hello New World<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="template-tag">&#123;% <span class="name">endcodeblock</span> %&#125;</span><span class="xml"></span></div></pre></td></tr></table></figure>
<p>とすれば、先ほどの出力例のようにハイライトされて書き出されます。</p>
<p>他にもYoutube動画やGistを埋め込んでくれるタグも用意されています。</p>
<p class="page-link"><a href="https://hexo.io/docs/tag-plugins.html" target="_blank"><span class="title">Tag Plugins</span><span class="author">Hexo</span></a></p>
<h1 id="タグを自作する"><a href="#タグを自作する" class="headerlink" title="タグを自作する"></a>タグを自作する</h1><p><img src="eyecatch.png" alt="My Tag"></p>
<h2 id="作るもの"><a href="#作るもの" class="headerlink" title="作るもの"></a>作るもの</h2><p>今回は、リンク付きの画像を書き出してくれる<code>anchorImage</code>タグを作ってみます。<br>引数は、<code>画像のパス</code>、<code>リンク</code>でリンクが省略された場合は画像を開くようにします。</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="built_in">anchor</span>Image path [link] %&#125;</div></pre></td></tr></table></figure>
<h2 id="スクリプトを置くところ"><a href="#スクリプトを置くところ" class="headerlink" title="スクリプトを置くところ"></a>スクリプトを置くところ</h2><p>まずはじめに、任意の名前のJavaScriptファイルを<code>/path/to/hexo/themes/my-theme/scripts</code>に置きます。</p>
<p>ここでは、<code>anchor-image.js</code>とします。</p>
<h2 id="構文"><a href="#構文" class="headerlink" title="構文"></a>構文</h2><p>タグは以下の構文で作ることができます。</p>
<figure class="highlight delphi"><figcaption><span>構文</span><a href="https://hexo.io/api/tag.html" target="_blank" rel="external">Reference</a></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo.extend.tag.<span class="keyword">register</span>(<span class="keyword">name</span>, <span class="function"><span class="keyword">function</span><span class="params">(args, content)</span> <span class="comment">&#123;</span></span></div><div class="line">    // 処理</div><div class="line">&#125;, <span class="title">options</span>);</div></pre></td></tr></table></figure>
<ul>
<li><code>name</code>はタグの名前です（今回は<code>anchorImage</code>）。記述は</li>
<li>引数の<code>args</code>は、<code>{%  %}</code>の中に書かれる引数がスペースのところで区切られた配列で渡されます。</li>
<li><code>content</code>は、タグで囲まれた中身がそのまま渡されます。</li>
<li>最後の<code>options</code>は、閉じタグが必要かなどのオプションを設定します（ここでは触れません）。</li>
</ul>
<p>この辺の詳しいことはドキュメントで確認してください。</p>
<p class="page-link"><a href="https://hexo.io/api/tag.html" target="_blank"><span class="title">Tag API</span><span class="author">Hexo</span></a></p>
<h2 id="コーディング"><a href="#コーディング" class="headerlink" title="コーディング"></a>コーディング</h2><p>それでは、構文に当てはめてタグを作っていきましょう。</p>
<figure class="highlight pf"><figcaption><span>anchor-image.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo.extend.<span class="keyword">tag</span>.register('<span class="built_in">anchor</span>Image', function(args) &#123;</div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>これで、雛形ができました。<br>今回の場合、<code>args</code>は<code>[ path, link (optional) ]</code>となります。</p>
<p>では、引数を変数に入れておきましょう。</p>
<figure class="highlight actionscript"><figcaption><span>anchor-image.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hexo.extend.tag.register(<span class="string">'anchorImage'</span>, <span class="function"><span class="keyword">function</span><span class="params">(args)</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> path = args[<span class="number">0</span>];</div><div class="line">    <span class="keyword">var</span> link = args[<span class="number">1</span>] || path;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>最後に、書き出したいHTMLを返却させます。</p>
<figure class="highlight actionscript"><figcaption><span>anchor-image.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hexo.extend.tag.register(<span class="string">'anchorImage'</span>, <span class="function"><span class="keyword">function</span><span class="params">(args)</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> path = args[<span class="number">0</span>];</div><div class="line">    <span class="keyword">var</span> link = args[<span class="number">1</span>] || path;</div><div class="line">    <span class="keyword">return</span> <span class="string">'&lt;a href="'</span> + link + <span class="string">'"&gt;&lt;img src="'</span> + path + <span class="string">'"&gt;&lt;/a&gt;'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>これでタグは完成です。</p>
<h2 id="使ってみる"><a href="#使ってみる" class="headerlink" title="使ってみる"></a>使ってみる</h2><p>では、作ったタグを使ってみましょう。<br>特にHexoに登録したりという手順は必要ありません。</p>
<figure class="highlight markdown"><figcaption><span>anchor-image.md</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% anchorImage /images/picture.png %&#125;</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><figcaption><span>書き出し</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"/images/picture.png"</span>&gt;&lt;<span class="selector-tag">img</span> src=<span class="string">"/images/picture.png"</span>&gt;&lt;/a&gt;</div></pre></td></tr></table></figure>
<figure class="highlight markdown"><figcaption><span>anchor-image.md</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;% anchorImage /images/logo.png http://simo.website %&#125;</div></pre></td></tr></table></figure>
<figure class="highlight stylus"><figcaption><span>書き出し</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"http://simo.website"</span>&gt;&lt;<span class="selector-tag">img</span> src=<span class="string">"/images/picture.png"</span>&gt;&lt;/a&gt;</div></pre></td></tr></table></figure>
<h1 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h1><p>Hexoは簡単にMarkdownが拡張できるので、たとえば広告を記事に貼り付けたり、使い方次第ではギャラリーを実装したりすることもできるでしょう。</p>
<p>また、Node.jsが使えるので、<code>fs</code>を使ってファイルを参照したり、データベースにアクセスしたりすることもできます。</p>
<p>みなさんもよく使うパーツをタグにして手間を省いてみませんか？</p>
</div><div class="footer"><div class="post-details"><div class="details"><ul class="category"><li><a href="/categories/Webその他/" class="post-category theme-accent__hover__color">Webその他</a></li></ul><ul class="tag"><li><a href="/tags/Hexo/" class="post-tag theme-accent__hover__color">Hexo</a></li><li><a href="/tags/Tag-Plugins/" class="post-tag theme-accent__hover__color">Tag Plugins</a></li><li><a href="/tags/Markdown/" class="post-tag theme-accent__hover__color">Markdown</a></li></ul><div class="date"><p class="posted">2017.01.05 9:00:00</p></div></div></div><div class="post-comment"><div id="disqus_thread"></div><script>/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//hello-new-world.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></main></article></main><footer class="global-footer"><div id="jumper" class="jumper theme-accent__hover__color"><span class="ion-android-arrow-up"></span></div><div class="container"><div class="launcher"><h5 class="theme-accent__color">Recent Posts</h5><div class="recent-posts"><div class="recent-post"><div style="background-image: url(/post/hexo-my-tag-plugin/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.05</div><h6>HexoのMarkdownを拡張する</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/Webその他/" class="theme-accent__hover__color">Webその他</a></li></ul><a href="/post/hexo-my-tag-plugin/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div><div class="recent-post"><div style="background-image: url(/post/lets-start-gimp-01/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.03</div><h6>〔GIMP入門#1〕無料のグラフィックソフト「GIMP」を使って画像編集入門！</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/GIMP/" class="theme-accent__hover__color">GIMP</a></li></ul><a href="/post/lets-start-gimp-01/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div><div class="recent-post"><div style="background-image: url(/post/js-get-day-of-year/eyecatch.png)" class="eyecatch"></div><div class="details"><div class="date theme-accent__before__background-color">2017.01.01</div><h6>JavaScriptで今年の経過日数を取得する</h6><footer class="recent-footer"><ul class="categories"><li><a href="/categories/フロントエンド/" class="theme-accent__hover__color">フロントエンド</a></li></ul><a href="/post/js-get-day-of-year/" class="theme-accent__color theme-accent__border-color theme-accent__hover__background-color more">記事をみる</a></footer></div></div></div></div><ul class="launchers col-3"><li><h5 class="theme-accent__color">About the Author</h5><div class="profile"><img src="/images/common/avator-200.png" class="avator"/><div class="content"><div class="name theme-accent__before__border-color">simochee</div><p>西の方の高専で情報系の高専生（ＪＫ）をしています。もともとプログラミングがしたくて高専へ入ったのですが、学科名詐欺に遭い回路とマイコンの勉強をしています(^_^;)　それでもプログラミングがしたかったので自力でウェブの勉強を始めました。自分の中にブームが来るとそれにまつわる記事しか書きません。</p></div></div></li><li><h5 class="theme-accent__color">Categories</h5><ul class="dist-list"><li class="dist-list-item"><a class="dist-list-link" href="/categories/GIMP/">GIMP</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/Webその他/">Webその他</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/フロントエンド/">フロントエンド</a><span class="dist-list-count">1</span></li><li class="dist-list-item"><a class="dist-list-link" href="/categories/未分類/">未分類</a><span class="dist-list-count">1</span></li></ul></li><li><h5 class="theme-accent__color">Archives</h5><ul class="dist-list"><li class="dist-list-item"><a class="dist-list-link" href="/archives/2017/01/">2017年1月</a><span class="dist-list-count">4</span></li></ul></li></ul><ul class="launchers col-2"><li><h5 class="theme-accent__color">SIMOCHEE//WORKS</h5><div class="simochee-works"><p>comming soon</p></div></li><li><h5 class="theme-accent__color">Tag Cloud</h5><div class="tagcloud"><a href="/tags/GIMP/" style="font-size: 10px;">GIMP</a> <a href="/tags/Hello-World/" style="font-size: 10px;">Hello World</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Tag-Plugins/" style="font-size: 10px;">Tag Plugins</a> <a href="/tags/Tips/" style="font-size: 10px;">Tips</a> <a href="/tags/グラフィック/" style="font-size: 10px;">グラフィック</a> <a href="/tags/日付操作/" style="font-size: 10px;">日付操作</a> <a href="/tags/日記/" style="font-size: 10px;">日記</a> <a href="/tags/連載/" style="font-size: 10px;">連載</a> <a href="/tags/連載：GIMP入門/" style="font-size: 10px;">連載：GIMP入門</a></div></li></ul></div><div class="footer-info theme-accent__border-color"><p class="copyright">Copyright &copy; 2016, <a href="http://simo.website" target="_blank" class="theme-accent__color">simo.website</a> All Rights Reserved</p></div></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script><script src="/scripts/script.js"></script></body></html>